GeekToolbox v7.0
 
轻量Android分区备份恢复工具 | 全兼容传统/AB/VAB/AVB机型
 
纯Shell编写的ROOT设备专用工具，由AI辅助开发编写，支持启动分区、EFS/基带分区的安全备份、恢复与校验，自动适配设备分区类型，交互式菜单操作，无需复杂命令，轻量无冗余，全sh环境兼容可直接运行。
 
🌟 核心特性
 
- 全机型适配：自动检测并兼容传统单分区/AB槽位/VAB/AVB机型，无需手动区分
- 物理级提取：针对VAB/AVB机型优化super分区挂载逻辑，绕开mapper只读限制，直接提取物理镜像
- 安全可靠：备份后自动做文件大小校验+SHA1校验码生成，配套操作日志，避免备份损坏/缺失
- 操作极简：可视化交互式菜单，数字选择功能，新手也能快速上手
- 自动清理：退出时自动卸载挂载目录、恢复SELinux状态、释放循环设备，无设备残留
- 高危防护：分区恢复需双重手动确认，从源头避免误操作覆盖重要分区
- 低依赖：纯sh环境运行，仅依赖Android原生基础命令，无需额外安装软件
 
📋 支持功能
 
1. 启动分区备份：一键备份boot/init_boot/vendor_boot/recovery，AB/VAB机型自动匹配当前槽位
2. EFS/基带备份：完整备份modemst1/modemst2/fsg/fsc/persist/modem等基带相关分区，AB机型额外备份槽位基带
3. 分区恢复：将本地备份镜像写入指定设备分区（专属高危操作流程）
4. 备份校验：检测备份目录的SHA1校验文件完整性，验证备份有效性
 
🚀 前置条件
 
1. 设备已获取ROOT权限（Magisk/KernelSU/其他ROOT方案均可）
2. 推荐终端：MT管理器终端（兼容性最优），也支持Adb Shell、Termux（需额外挂载存储）
3. 备份目录剩余存储空间≥500MB
4. 设备自带基础命令： losetup / blockdev （脚本会自动检测）
 
📦 快速使用
 
步骤1：获取脚本
 
将脚本保存为 GeekToolbox.sh ，上传至设备任意目录（推荐 /sdcard/ ）。
 
步骤2：添加执行权限
 
终端执行命令赋予脚本可执行权限：
 
bash
  
chmod +x /sdcard/GeekToolbox.sh
 
 
步骤3：运行脚本
 
直接执行，自动进入交互式菜单，按提示操作即可：
 
bash
  
sh /sdcard/GeekToolbox.sh
 
 
步骤4：功能选择
 
输入数字选择对应功能，回车执行：
 
-  1 ：启动分区备份（推荐首次使用优先执行）
-  2 ：EFS/基带备份（设备基带重要分区，建议必做）
-  3 ：分区恢复（高危操作，仅分区损坏时使用）
-  4 ：校验备份（验证备份文件是否完整）
-  0 ：退出脚本
 
📂 备份目录说明
 
1. 默认目录： /sdcard/GeekToolbox/ ，运行时可自定义修改备份路径
2. 文件结构：
- 启动分区镜像：直接存放于备份根目录（如 boot_a.img / init_boot.img ）
- EFS/基带镜像：存放于 备份目录/EFS/ 子目录
- 校验文件： sha1sums.txt （所有有效备份镜像的SHA1校验码）
- 设备&操作日志： backup_时间戳.log （含设备型号、Android版本、备份操作记录）
 
📱 设备自动检测
 
脚本运行后会自动检测设备分区类型，终端输出示例：
 
plaintext
  
[i] 槽位: _a
[i] A/B: 1  VAB: 1
 
 
- 槽位： _a / _b 为AB机型， none 为传统单分区机型
- A/B： 1 表示AB槽位机型， 0 表示传统机型
- VAB： 1 表示VAB/AVB机型， 0 表示非VAB机型
 
⚠️ 重要注意事项
 
分区恢复（高危操作）
 
1. 恢复前务必确认备份镜像与目标设备/分区完全匹配，跨设备/跨分区恢复会导致设备变砖
2. 输入目标分区名时需准确（如AB机型 boot_b 、传统机型 boot ）
3. 恢复需输入 YES 双重确认，切勿随意输入
4. 恢复完成后必须重启设备，否则修改无法生效
 
通用注意事项
 
1. 脚本运行时会临时关闭SELinux，退出后自动恢复，无需手动操作
2. VAB/AVB机型会优先采用物理级提取方式，提取成功会明确标注
3. 备份完成后，建议将备份文件复制到电脑/云存储，防止设备存储损坏丢失
4. 若提示权限不足，请检查终端是否已授予ROOT权限，或切换至MT管理器终端重试
5. 运行过程中若出现分区挂载问题，脚本会自动降级为兼容提取方式
 
❓ 常见问题
 
Q1：运行提示「必须ROOT」？
 
A：确认终端已获取ROOT权限，部分终端需手动点击「授予ROOT」，建议切换MT管理器终端重试。
 
Q2：VAB机型提示「挂载失败或无文件」？
 
A：检查设备是否为真实VAB/AVB机型，重启设备后重新运行，确保super分区未被其他程序占用。
 
Q3：备份完成后未找到镜像文件？
 
A：检查备份目录存储空间是否≥500MB，或查看备份目录下的日志文件排查具体原因。
 
Q4：恢复分区时提示「分区不存在」？
 
A：确认输入的分区名正确，AB机型需带槽位后缀（如 boot_a ），可通过设备分区列表验证分区名称。
 
Q5：SHA1校验文件为空？
 
A：仅当备份镜像文件大小＞1024字节时会生成校验码，空校验文件为正常现象，可直接检查镜像文件大小。
 
📄 许可证
 
本项目基于MIT许可证开源，可自由修改、分发、使用，支持商用/非商用，修改后请保留原项目信息。
 
🚨 免责声明
 
1. 本工具仅用于个人合法所有设备的分区备份与恢复，请勿用于商业用途或非法设备操作
2. 使用前请确保你拥有设备的合法所有权，切勿在他人设备上未经授权使用
3. 因误操作、跨设备恢复、设备本身硬件/系统问题等导致的设备变砖、数据丢失，项目作者不承担任何责任
4. 运行本脚本即表示你已仔细阅读并同意本免责声明的所有条款
 
 
 
适配说明
 
兼容Android 10+全版本，实测支持Magisk 26+/KernelSU 0.9+
| 架构 | 状态 | 测试设备 |
|------|------|---------|
| VAB (Android 12+) | ✅ 已验证 | 一加Ace2pro |
| A/B | ❓ 理论支持，待验证 | - |
| 传统 | ✅ 已验证 | 小米8 |

如你在 AB 或传统设备上使用成功/失败，欢迎到GitHubIssues反馈
 
开发说明
 
本工具的Shell脚本代码由AI辅助开发编写，经人工调试、实测验证后发布。
 [English README](README.md)
